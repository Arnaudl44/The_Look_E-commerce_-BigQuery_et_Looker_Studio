```markdown
# ğŸ“Š Analyse des DonnÃ©es E-commerce

---

## ğŸ›’ I - Table `orders`

### ğŸ”¢ 1) Nombre de lignes dans la table `orders`
```sql
SELECT *
FROM `innate-path-415009.thelook_ecommerce.orders`;
```
**ğŸ“Œ RÃ©sultat** : 125 122 lignes

---

### ğŸ“¦ 2) Nombre de commandes et d'utilisateurs distincts
```sql
SELECT
  COUNT(DISTINCT order_id) AS number_of_orders,
  COUNT(DISTINCT user_id) AS number_of_customers,
  SUM(num_of_item) AS number_of_items_sold,
  SUM(num_of_item) / COUNT(DISTINCT order_id) AS average_items_per_order
FROM `innate-path-415009.thelook_ecommerce.orders`;
```
**ğŸ“Œ RÃ©sultat** :
- ğŸ·ï¸ 125 122 commandes
- ğŸ‘¥ 80 130 utilisateurs
- ğŸ“¦ 181 652 produits vendus
- ğŸ“Š 1,45 produits par commande

---

### ğŸ‘©â€ğŸ’¼ 3) Nombre de commandes par genre
```sql
SELECT
  gender,
  COUNT(order_id) AS number_of_orders
FROM `innate-path-415009.thelook_ecommerce.orders`
GROUP BY gender;
```
**ğŸ“Œ RÃ©sultat** :
- ğŸ‘© Femmes : 62 700 commandes
- ğŸ‘¨ Hommes : 62 422 commandes

---

### ğŸ“Š 4) Nombre de commandes par statut
```sql
SELECT
  status,
  COUNT(DISTINCT order_id) AS number_of_orders
FROM `innate-path-415009.thelook_ecommerce.orders`
GROUP BY status;
```
**ğŸ“Œ RÃ©sultat** :
- ğŸšš **Shipped** : 37 490
- âœ… **Complete** : 31 342
- ğŸ”„ **Processing** : 24 971
- âŒ **Cancelled** : 18 788
- ğŸ”™ **Returned** : 12 531

---

### ğŸ“ˆ 5) RÃ©partition des utilisateurs selon le nombre de commandes passÃ©es
```sql
WITH total_orders AS (
  SELECT
    user_id,
    COUNT(DISTINCT order_id) AS number_of_orders
  FROM `innate-path-415009.thelook_ecommerce.orders`
  GROUP BY user_id
)
SELECT 
  number_of_orders,
  COUNT(user_id)
FROM total_orders
GROUP BY number_of_orders
ORDER BY 2 DESC;
```
**ğŸ“Œ RÃ©sultat** :
- 1 commande : 50 149 utilisateurs
- 2 commandes : 19 948
- 3 commandes : 5 055
- 4 commandes : 4 978

---

### ğŸ›ï¸ 6) RÃ©partition des commandes par nombre de produits
```sql
SELECT
  num_of_item,
  COUNT(order_id) AS number_of_orders
FROM `innate-path-415009.thelook_ecommerce.orders`
GROUP BY num_of_item
ORDER BY 2 DESC;
```
**ğŸ“Œ RÃ©sultat** :
- 1 produit : 87 944
- 2 produits : 25 018
- 3 produits : 6 318
- 4 produits : 6 292

---

### ğŸ“… 7) Nombre de commandes et d'utilisateurs par annÃ©e
```sql
SELECT
  EXTRACT(YEAR FROM created_at) AS yr,
  COUNT(DISTINCT order_id) AS number_of_orders,
  COUNT(DISTINCT user_id) AS number_of_users
FROM `innate-path-415009.thelook_ecommerce.orders`
GROUP BY 1
ORDER BY 1;
```
**ğŸ“Œ RÃ©sultat** :
- ğŸ“ˆ 2 193 commandes en 2019 (annÃ©e incomplÃ¨te) Ã  39 866 en 2024
- ğŸ‘¥ 2 050 clients en 2019 et 30 793 en 2024

---

### ğŸ“Š 8) Nombre de commandes et d'utilisateurs par mois (2019 - 2024)
```sql
SELECT
  EXTRACT(MONTH FROM created_at) AS mo,
  COUNT(DISTINCT order_id) AS number_of_orders,
  COUNT(DISTINCT user_id) AS number_of_users
FROM `innate-path-415009.thelook_ecommerce.orders`
GROUP BY 1
ORDER BY 1;
```
**ğŸ“Œ Observations** :
- ğŸ“† Juin est le mois le plus actif
- ğŸ“‰ L'activitÃ© augmente de mars Ã  juin puis diminue aprÃ¨s juillet

---

### ğŸ“Š 9) Nombre de commandes par statut, annÃ©e et mois
```sql
SELECT
  EXTRACT(YEAR FROM created_at) AS yr,
  COUNT(order_id) AS total_orders,
  COUNT(CASE WHEN status = 'Processing' THEN order_id ELSE NULL END) AS Processing,
  ROUND(COUNT(CASE WHEN status = 'Processing' THEN order_id ELSE NULL END) / COUNT(order_id) * 100, 2) AS pct_Processing,
  COUNT(CASE WHEN status = 'Complete' THEN order_id ELSE NULL END) AS Complete,
  ROUND(COUNT(CASE WHEN status = 'Complete' THEN order_id ELSE NULL END) / COUNT(order_id) * 100, 2) AS pct_Complete,
  COUNT(CASE WHEN status = 'Shipped' THEN order_id ELSE NULL END) AS Shipped,
  ROUND(COUNT(CASE WHEN status = 'Shipped' THEN order_id ELSE NULL END) / COUNT(order_id) * 100, 2) AS pct_Shipped,
  COUNT(CASE WHEN status = 'Returned' THEN order_id ELSE NULL END) AS Returned,
  ROUND(COUNT(CASE WHEN status = 'Returned' THEN order_id ELSE NULL END) / COUNT(order_id) * 100, 2) AS pct_Returned,
  COUNT(CASE WHEN status = 'Cancelled' THEN order_id ELSE NULL END) AS Cancelled,
  ROUND(COUNT(CASE WHEN status = 'Cancelled' THEN order_id ELSE NULL END) / COUNT(order_id) * 100, 2) AS pct_Cancelled
FROM `innate-path-415009.thelook_ecommerce.orders`
GROUP BY 1
ORDER BY 1;
```
**ğŸ“Œ Observations** :
- ğŸ”„ Le taux de retour est stable (~10%)
- âŒ Le taux d'abandon est autour de 15%

---

### ğŸšš 10) DÃ©lais moyens de livraison
```sql
WITH CTE AS (
  SELECT
    order_id,
    EXTRACT(YEAR FROM created_at) AS yr,
    TIMESTAMP_DIFF(delivered_at, shipped_at, DAY) AS days_diff
  FROM `innate-path-415009.thelook_ecommerce.orders`
)
SELECT 
  yr,
  ROUND(AVG(days_diff), 2) AS Average_delivery_time
FROM CTE
GROUP BY 1
ORDER BY 1;
```
**ğŸ“Œ RÃ©sultat** : DÃ©lais de livraison stables (~2 jours)

---

### ğŸ“¦ 11) DÃ©lais moyens d'envoi
```sql
WITH CTE AS (
  SELECT
    order_id,
    EXTRACT(YEAR FROM created_at) AS yr,
    TIMESTAMP_DIFF(shipped_at, created_at, DAY) AS days_diff
  FROM `innate-path-415009.thelook_ecommerce.orders`
)
SELECT 
  yr,
  ROUND(AVG(days_diff), 2) AS Average_shipping_time
FROM CTE
GROUP BY 1
ORDER BY 1;
```
**ğŸ“Œ RÃ©sultat** : DÃ©lais d'envoi stables (~1 jour)

---

ğŸ’¡ **Astuce** : Ce format inclut des emojis et des sÃ©parateurs pour une meilleure lisibilitÃ© et convivialitÃ©.
```
